<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Rock Papper Scissors</title>

  <style>
      @import 'style.css';
  </style>

</head>

<body>

<main>
<input id = "number-of-games"></input>

<div>
<button id = "Rock" class = "player-choice">Rock</button>
<button id = "Papper" class = "player-choice">Paper</button>
<button id = "Scissors" class = "player-choice">Scissors</button>
</div>

</main>

</body>

<script>
   
   const main = document.querySelector('main');
    
    function buttonClick(el){
        el.classList.add('button-click');
        el.onanimationend = () =>{el.classList.remove('button-click')}
        console.log(el);
    }

    function computerPlay(){
        let ran = Math.floor(Math.random() * 3);
        if(ran == 0){
            return "rock";
        }
        else if(ran == 1){
            return "papper";
        }
        else{
            return "scissors";
        }
    }
    
    function divThere(){
        let divNum = document.getElementsByTagName('div');
        console.log(divNum.length);
        if(divNum.length !== 2){
            let elementR = document.querySelector('#result');
            let elementM = document.querySelector('#matchUP');
            elementR.remove();
            elementM.remove();
        }
    }

    function displayWinner(result){
        divThere();
        const div = document.createElement('div');
        div.id = 'result';
        div.textContent = result;
        div.style.cssText = "font-size: 24px"
        main.appendChild(div);
    }
    
    function matchup(player, computer){
        const div = document.createElement('div');
        div.style.cssText = "display: flex; font-size: 28px; width: 100%; height: 50%; background-color: green; justify-content: space-evenly;";
        div.innerHTML = "<p class = 'matchup'>" + player + "</p>" + "<p class = 'matchup'>VS.</p>" + "<p class = 'matchup'>" + computer + "</p>";
        div.id = "matchUP";
        main.appendChild(div);
    }

    function playRound(playerSelection, computerSelection){
        
            matchup(playerSelection, computerSelection);
            
             if(playerSelection == computerSelection){
                displayWinner("Draw");
                 console.log(playerSelection);
                 console.log(computerSelection);
                 return "Draw";
             }
 
             if(playerSelection == 'rock'){
                 if(computerSelection == 'scissors'){
                    displayWinner("You win!");
                     console.log(playerSelection);
                 console.log(computerSelection);
                     return "You win!";
                 }
                 else{displayWinner("You Lose!"); console.log(playerSelection); console.log(computerSelection); return "You Lose!";}
 
             }
             else if(playerSelection == 'papper'){
                 if(computerSelection == 'rock'){
                    displayWinner("You win!");
                     console.log(playerSelection);
                    console.log(computerSelection);
                     return "You win!";
                 }
                 else{displayWinner("You Lose!"); console.log(playerSelection); console.log(computerSelection); return "You Lose!";}
 
             }
             else{
                 if(computerSelection == 'papper'){
                    displayWinner("You win!");
                     console.log(playerSelection);
                     console.log(computerSelection);
                     return "You win!";
                 }
                 else{displayWinner("You Lose!"); console.log(playerSelection); console.log(computerSelection); return "You Lose!";}
             }
    }

    const rock = document.querySelector('#Rock');
   const papper = document.querySelector('#Papper');
   const scissors = document.querySelector('#Scissors');

   rock.addEventListener('click', function(){
       let compSelect = computerPlay();
       buttonClick(this);
       playRound('rock', compSelect);
   });
   papper.addEventListener('click', function(){
       let compSelect = computerPlay();
       playRound('papper', compSelect);
   });
   scissors.addEventListener('click', function(){
       let compSelect = computerPlay();
       playRound('scissors', compSelect);
   });


    /*
    function game(rounds){
        let winCtr = 0;
         for(let i = rounds; i > 0; i--){
             const playerSelection = window.prompt("Enter rock, papper, or scissors: ");
             const computerSelection = computerPlay();
             let winLose = playRound(playerSelection, computerSelection);
             if(winLose === "You win!"){
                 winCtr++;
             }
         }
         return winCtr;
    }
    let wins = game(parseInt(window.prompt("How Many Games Would You Like To Play?")));
    console.log("You have won " + wins + " game(s)"); 
 */
   </script>

</html>